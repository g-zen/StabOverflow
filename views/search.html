<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Stab Overflow</title>

		<!-- navbar style -->
		<link rel="stylesheet" type="text/css" href="/navbar.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet"> 
	</head>
	<body>
		<header>
			<a href="/"><img src="/staboverflow.png" align="middle"/></a>
			<div id="searchTools">
				<ul>
					<li>
						<form id="searchForm" name1="search" method="POST" action="/search">
							<input id="searchBar" name="query" type="text" placeholder="Search StabOverflow" autocomplete="off">
							<button id="searchSubmit" type="submit" form="searchForm"><i id="searchIcon" class="fas fa-search"></i></button>
						</form>
					</li>
					<li>
						<a id="browse" href="/search">Browse Questions</a>
					</li>
				</ul>
			</div>
			<div id="authLinks">
				<ul>
				{{#loggedIn}}
					<li>
						<a href="/logout?returnTo=%2Fsearch">Log Out <i class="fas fa-sign-out-alt"></i></a>
					</li>
					{{#user_uid}}
					<li>
						<a href="/users/{{user_uid}}">My Profile {{#username}}({{username}}) {{/username}}<i class="fas fa-user"></i></a>
					</li>
					{{/user_uid}}
				{{/loggedIn}}
				{{^loggedIn}}
					<li>
						<a href="/auth/google?returnTo=%2Fsearch">Log In <i class="fas fa-sign-in-alt"></i></a>
					</li>
					<li>
						<a href="/auth/google">Sign Up <i class="fas fa-user-plus"></i></a>
					</li>
				{{/loggedIn}}
				</ul>
			</div>
		</header>

		<form name="secondarySearch" method="POST" action="/search">
			<input name="query" type="text" value="{{query}}">
			<input type="submit" value="Search"><br>

			Filter by Category
			<select name="category" onchange="document.secondarySearch.submit();">
				<option value="0">All</option>
				{{#categories}}
					<option {{#isSelected}}selected="selected" {{/isSelected}}value="{{uid}}">{{name}}</option>
				{{/categories}}
			</select>
			<br>

			Filter by answers
			<select name="answeredStatus" onchange="document.secondarySearch.submit();">
				<option {{#All}}selected="selected" {{/All}}value="All">All</option>
				<option {{#Unanswered}}selected="selected" {{/Unanswered}}value="Unanswered">Unanswered</option>
				<option {{#Answered}}selected="selected" {{/Answered}}value="Answered">Answered</option>
			</select>
		</form>

		<h2>Search Results</h2>

		<div>
			{{#results}}
				<div>
					<!-- category, upvotes, answers -->
					<div>
						{{#category}}<div>{{category}}</div>{{/category}}
						<div>{{upvotes}} upvotes</div>
						<div>{{answer_count}} answers</div>
					</div>

					<!-- title, owner, time -->
					<div>
						<div><a href='/questions/{{redirect_uid}}'>{{title}}</a></div>
						<div>
							asked {{creation_date}} by <a href="/users/{{owner_uid}}" title="{{owner_real}}">{{owner_display}}</a>
							{{#image_url}}<img src="{{image_url}}" width="50"/>{{/image_url}}
						</div>
					</div>
				</div>
				<br>
			{{/results}}
			{{^results}}
			No results found!
			{{/results}}
		</div>

	</body>
</html>
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Stab Overflow</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	</head>
	<body>
		<div id="navbar">
			<!-- put StabOverflow image here -->
			<form name="search" method="POST" action="/search">
				<input name="category" value="None" hidden>
				<input name="answeredStatus" value="All" hidden>
				<input name="query" type="text" placeholder="Search StabOverflow" onchange="document.search.submit()">
			</form>
			<a href="/search">Browse Questions</a>
			{{#loggedIn}}
				<a href="/logout">Log Out</a>
				{{#user_uid}}<a href="/users/{{user_uid}}">My Profile{{#username}} ({{username}}){{/username}}</a>{{/user_uid}}
			{{/loggedIn}}
			{{^loggedIn}}
				<a href="/auth/google">Log In</a>
				<a href="/auth/google">Sign Up</a>
			{{/loggedIn}}
		</div>

		<h1>Admin Portal</h1>

		<form method="POST" action="/addAccount" name="account" onsubmit="return confirm('Are you sure you want to add ' + document.account.email.value + '?');">
			Authorize a new account:<br>
			<input name="name" type="text" placeholder="Full name" maxlength="32"><br>
			<input name="email" type="text" placeholder="Email" maxlength="45"><br>
			<button type="submit">Authorize</button>
		</form>
		<br>
		<form method="POST" action="/makeAdmin" name="makeAdmin" onsubmit="return confirm('Are you sure you want to make ' + document.makeAdmin.email.value + ' an administrator?');">
			Grant admin privileges:<br>
			<input name="email" type="text" placeholder="Email (existing account)"><br>
			<button type="submit">Grant privileges</button>
		</form>
		<br>
		<form method="POST" action="/removeAdmin" name="removeAdmin" onsubmit="return confirm('Are you sure you want to revoke the privileges of ' + document.removeAdmin.email.value + '?');">
			Revoke admin privileges:<br>
			<input name="email" type="text" placeholder="Email (existing account)"><br>
			<button type="submit">Revoke privileges</button>
		</form>
		<br>
		<form method="POST" action="/newCategory" name="newCat" onsubmit="return confirm('Are you sure you want to create the category ' + document.newCat.category.value + '?');">
			Create a new category:<br>
			<input name="category" type="text" placeholder="Category name" maxlength="32"><br>
			<button type="submit">Create Category</button>
		</form>
		{{#loadedUnarchived}}
		<br>
		<form method="POST" action="/archiveCategory" name="archiveCat" onsubmit="return confirm('Are you sure you want to archive the category ' + $('#archiveCat option:selected').text() + '? (Users will no longer be able to make posts under this category)');">
			Archive an existing category:<br>
			<select id="archiveCat" name="uid">
				{{#categories}}
				<option value="{{uid}}">{{name}}</option>
				{{/categories}}
			</select>
			<br>
			<button type="submit">Archive Category</button>
		</form>
		{{/loadedUnarchived}}
		{{#loadedAllCategories}}
		<br>
		<form method="POST" action="/deleteCategory" name="deleteCat" onsubmit="return confirm('Are you sure you want to FULLY DELETE the category ' + $('#deleteCat option:selected').text() + '? (This category will disappear from the site completely)');">
			Delete an existing category:<br>
			<select id="deleteCat" name="uid">
				{{#categories}}
				<option value="{{uid}}">{{name}}</option>
				{{/categories}}
			</select>
			<br>
			<button type="submit">Delete Category</button>
		</form>
		{{/loadedAllCategories}}
	</body>
</html>